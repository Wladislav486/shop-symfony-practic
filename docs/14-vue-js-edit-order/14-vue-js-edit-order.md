### 104 Подключаем Vue.js

**_Задача._**

1. Настроить работу на проекте с Vue.js

**_Решение._**

1. Устанавливаем зависимости  
   `yarn add vue@2.6.12 vue-loader@15.9.8 vue-template-compiler@2.6.12`
2. Подключим vue на странице редактирования заказа
3. Создадим 2 файла, являющиеся инициализацией vue для страницы редактирования заказа

- `app/assets/js/section/admin/admin-order/app.js`
- `app/assets/js/section/admin/admin-order/App.vue`

4. Подключим `app/assets/js/section/admin/admin-order/app.js` в настройках webpack
5. Добавляем загрузчик для vue в `app/webpack.config.js`
6. Подключаем стили(пока их нет) и js скрипты на странице редактирования заказа  
   `encore_entry_link_tags('appAdminOrder')`  
   `encore_entry_script_tags('appAdminOrder')`

### 106 Проектирование архитектуры

**_Задача._**

1. Установить vuex.  
   Хранилище, действует как посредник, который упрощает, стандартизирует и централизует обмен данными между компонентами
   Vue.
2. Внедрить vuex в приложение vue.js

**_Решение._**

1. Устанавливаем библиотеку vuex
   `sudo yarn add vuex@3.6.2`
2. Реализуем структуру хранилища -  
   app/assets/js/section/admin/admin-order/store/modules/products.js
3. Регистрируем структуру во vuex -  
   app/assets/js/section/admin/admin-order/store/index.js
4. Передаём vuex в приложение vue.js
5. Подключаем хранилище и выводим тестовое св-во - состояние в шаблоне

### 107 Из Twig в Vue.js

**_Задача._**

1. Передать данные с бэка во vue - компонент

**_Решение._**

1. В экшене контроллера формируем массив/объект с необходимыми хар-ками товаров
2. В twig шаблоне записываем данные в глобальный объект window.staticStore.orderProducts
3. Выведем данные в компоненте в created - хук жизненного цикла компонента.
   Работает после создания экземпляра компонента, но до взаимодействия с DOM

### 108 Список продуктов заказа

**_Задача._**

1. В шаблоне страницы "Редактирование заказа" реализовать вывод его товаров через vue.js и vuex

**_Решение._**

1. В экшене контроллера сформировали массив с нужными данными по продуктам
2. В шаблоне страницы записали данные в глобальный объект
3. Глобальный объект записали в хранилище vuex в состояния
4. Создали vue компонент, отвечающий за вывод одного товара
5. В главном компоненте получили продукты из vuex и подключили дочерний компонент
6. Внедрили дочерний компонент в шаблон главного компонента
7. Передали в дочерний компонент объект с продуктами

### 109 Кнопка «Details»

**_Задача._**

1. Реализовать переход на редактирование товара по клику на кнопку "Details" в редактировании заказа

**_Решение._**

1. В компоненте списка товаров реализуем обработчик события клика по кнопке "Details"
2. Создаём неполный роут у экшена до страницы редактирования продукта, в компоненте списка товаров дополним его ид
   продукта
3. Из шаблона редактирования заказа передаём роут в обработчик клика по кнопке "Details"
4. В обработчике клика дополняем роут - ид продукта
5. Реализуем логику - открытие страницы редактирования товара по ссылке в новом окне

### 110 111 Удаление продукта.

**_Задача._**

1. Реализовать удаление товара у заказа через API Platform и vue.js.
   По клику на кнопку Remove в редактировании заказа.

**_Решение._**

1. Устанавливаем зависимости js
   `sudo yarn add axios@0.21.1 http-status-codes@2.1.4`

- axios - библиотека для совершения http запросов на бэк к API
- http-status-codes - зависимость для удобства работы с кодами ответов http запросов

2. Производим настройки API для сущности OrderProduct

- реализуем обработку http методов ерез Api Platform

3. В хранилище реализуем экшен реализующий удаление продукта у заказа

- для формирования url на удаление товара у заказа передаём из шаблона страницы изменения заказа маршрут получения
  продуктов
- и в экшене в конец url добавляем ид продукта, тем самым получая url на удаление товара

4. Создаём обработчик клика по кнопке Remove, в нём вызываем из хранилища акшен удаления продукта

### 112 Добавления продукта. Проектирование

**_Задача._**

1. Создать структуру компонента добавления товаров в заказ, подключить в главном компоненте

**_Решение._**

1. Создаём файл под компонент
2. Реализуем шаблон в котором прописываем составляющие формы

- список категорий
- список ид существующих продуктов
- кол-во продукта
- цена за единицу продукта
- кнопка "Details"
- кнопка "Add"

3. Инициализируем логику компонента в js
4. Подключаем компонент добавления в родительском компоненте